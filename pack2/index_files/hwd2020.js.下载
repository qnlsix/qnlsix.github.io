function onPageReady(){if((location.hostname=="hhwdd.com"||location.hostname=="www.hhwdd.com")&&location.protocol=="http:"){location.href="https://hhwdd.com"+location.pathname+location.search}setMainMenu();setFooter();setMails();setUserInfo(function(a){if(a.userid&&a.userid!=""&&a.userid!="0"){$(".haveuser").show();$(".me-name").html('<i class="fa fa-user"></i>&nbsp;'+a.name)}else{$(".nonuser").show();$("#xloginbtn").attr("href","/user/login.page?redir="+escape(location.pathname+location.search))}if(a.sys=="Y"){$(".havesys").show();$(".syssp").append('<li><a href="/user/dongdong.page">伟栋入口</a></li>')}if(a.blog=="Y"){$(".haveblog").show()}if(a.teacher=="Y"){$(".haveteacher").show()}if(typeof(WeidongPageReady)=="function"){WeidongPageReady(a)}});$(".me-logout").click(function(){$.post("/user.UserFunc.dt",{cmd:"logout"},function(a){setUserData(null);location="/"})})}$(document).ready(function(){onPageReady()});function setMails(a){if(a){a=a.find(".wd-mail")}else{a=$(".wd-mail")}a.each(function(){var b=$(this).html()||"";if(b==""){b=$(this).attr("pre")+"@"+$(this).attr("suc")}if($(this).parents("a").length>0){$(this).html(b)}else{$(this).html('<a href="mailto:'+$(this).attr("pre")+"@"+$(this).attr("suc")+'">'+b+"</a>")}})}var pageUserData=null;function getUserData(){if(pageUserData!=null){return pageUserData}var f=getData("uid");var h=getData("uname");var a=getData("usys");var g=getData("uteacher");var b=getData("uapproved");var e=getData("ublog");var c=getData("uphone");var d=parseInt(getData("uti"));if(!d>0){d=0}var i=new Date().getTime();if((i-d)>5000){return(pageUserData=null)}if(typeof(f)=="string"&&typeof(h)=="string"){return pageUserData={userid:f,name:h,approved:b,sys:a,phone:c,blog:e,teacher:g}}return(pageUserData=null)}function setUserData(a){pageUserData=a;if(a==null){setData("uti","0");return}if(a.userid&&a.userid!=""){setData("uid",a.userid);setData("uname",a.name);setData("uapproved",a.approved);setData("ublog",a.blog);setData("usys",a.sys);setData("uteacher",a.teacher);setData("uphone",a.phone);setData("uti",new Date().getTime())}else{setData("uid","");setData("uname","");setData("uapproved","N");setData("ublog","N");setData("usys","N");setData("uteacher","N");setData("uphone","");setData("uti",new Date().getTime())}}function setUserInfo(a){var b=getUserData();if(!b){$.post("/user.UserFunc.dt",{cmd:"me"},function(c){if(c.ret=="OK"||c.ret=="1"){setUserData(c);if(typeof(a)=="function"){a(c)}}},"json")}else{if(typeof(a)=="function"){a(b)}}}function downloadByHandle(a){$("#dframe").attr("src","/web.RequireTempFile.do?handle="+a)}function setCodeMirrorLang(a,b){if(b=="CPP"){a.setOption("mode","text/x-c++src")}else{if(b=="C"){a.setOption("mode","text/x-csrc")}else{if(b=="JAVA"){a.setOption("mode","text/x-java")}else{if(b=="PYTHON"){a.setOption("mode","text/x-python")}}}}}function createCodeMirrorEditor(b,c){var a=CodeMirror.fromTextArea(b.get(0),{lineNumbers:true,matchBrackets:true,mode:"text/x-c++src",theme:"neat",indentWithTabs:true,styleActiveLine:true,indentUnit:2,tabSize:2,readOnly:false});setCodeMirrorLang(a,c);return a}function setMainMenu(){var a='	<div class="container">		<a class="navbar-brand hwd-brand" href="/"><img src="/img/hwd.png"></a>		<ul class="nav navbar-nav">			<li class="haveuser" style="display:none;"><a href="/schedule/schedule.page">日程表</a></li>			<li class="havesys haveteacher dropdown" style="display:none;">				<a class="dropdown-toggle" href="###" data-toggle="dropdown">学生管理</a>				<ul>					<li class="havesys" style="display:none;"><a href="/student/users.page">用户管理</a></li>					<li class="havesys" style="display:none;"><a href="/student/usersonline.page">在线用户</a></li>					<li><a href="/student/usersfacelogin.page">面对面登录审批</a></li>					<li class="havesys" style="display:none;"><a href="/student/userapply.page">实名申请</a></li>					<li role="separator" class="divider" style="display:none;"></li>					<li><a href="/student/students.page">学生管理</a></li>					<li><a href="/student/classes.page">班级管理</a></li>					<li role="separator" class="divider havesys" style="display:none;"></li>					<li class="havesys" style="display:none;"><a href="/student/competitions.page">证书管理</a></li>					<li class="divider"></li>					<li><a href="/student/smsmessages.page">通知管理</a></li>					<li class="divider havesys" style="display:none;"></li>					<li class="havesys" style="display:none;"><a href="/student/passcards.page">出入证管理</a></li>				</ul>			</li>			<li class="havesys dropdown" style="display:none;">				<a class="dropdown-toggle" href="###" data-toggle="dropdown">文章管理</a>				<ul>					<li><a href="/article/articles.page">文章列表</a></li>				</ul>			</li>			<li class="haveblog dropdown" style="display:none;">				<a class="dropdown-toggle" href="###" data-toggle="dropdown">博客</a>				<ul>					<li><a href="/article/blogs.page">我的博客</a></li>					<li role="separator" class="divider"></li>					<li><a href="/article/allblogs.page">全部博客</a></li>				</ul>			</li>			<li class="havesys dropdown" style="display:none;">				<a class="dropdown-toggle" href="###" data-toggle="dropdown">学习管理</a>				<ul>					<li><a href="/lesson/lessonlist.page">课程列表</a></li>					<li><a href="/lesson/lessonassign.page">课程发布</a></li>					<li><a href="/lesson/lessonfetch.page">课程获取记录</a></li>					<li role="separator" class="divider"></li>					<li><a href="/study/items.page">知识点列表</a></li>					<li><a href="/study/subs.page">章节列表</a></li>					<li><a href="/study/score.page">练习评分</a></li>					<li><a href="/study/students.page">练习排名</a></li>				</ul>			</li>			<li class="havesys dropdown" style="display:none;">				<a class="dropdown-toggle" href="###" data-toggle="dropdown">调查</a>				<ul>					<li><a href="/survey/surveylist.page">调查管理</a></li>				</ul>			</li>			<li class="havesys dropdown" style="display:none;">				<a class="dropdown-toggle" href="###" data-toggle="dropdown">命题管理</a>				<ul>					<li><a href="/problem/problemlist.page">命题列表</a></li>				</ul>			</li>			<li class="havesys dropdown" style="display:none;">				<a class="dropdown-toggle" href="###" data-toggle="dropdown">资源管理</a>				<ul class="syssp">					<li><a href="/server/servers.page">服务管理</a></li>					<li><a href="/server/judgers.page">评测器管理</a></li>				</ul>			</li>			<li class="havesys dropdown" style="display:none;">				<a class="dropdown-toggle" href="###" data-toggle="dropdown">开发助手</a>				<ul>					<li><a href="/code/assistant.page">代码辅助</a></li>					<li role="separator" class="divider"></li>					<li><a href="/code/fragments.page">代码片段</a></li>				</ul>			</li>			<li class="havesys dropdown" style="display:none;">				<a class="dropdown-toggle" href="###" data-toggle="dropdown">快速链接</a>				<ul>					<li><a href="http://sy.hhwdd.com/" target="_blank">小清橙</a></li>					<li><a href="/links/links.page">常用网站</a></li>				</ul>			</li>			<li><a href="/tools.page">小工具</a></li>			<li class="haveuser" style="display:none;"><a href="/user/usercenter.page">个人中心</a></li>		</ul>		<ul class="nav navbar-right">			<li class="nonuser" style="display:none;"><a id="xloginbtn" href="###">登录</a></li>			<li class="haveuser dropdown" style="display:none;">				<a class="me-name dropdown-toggle" href="###" data-toggle="dropdown"></a>				<ul>					<li><a href="/user/usercenter.page">个人中心</a></li>					<li><a class="me-logout" href="###">登出</a></li>				</ul>			</li>		</ul>	</div>';$(".mainmenu").html(a)}function setFooter(){var a='<div class="container">Copyright &copy; 胡伟栋 &nbsp; &nbsp; &nbsp; <a tabindex="-1" href="https://beian.miit.gov.cn">京ICP备13041125号-2</a> &nbsp; &nbsp; &nbsp; 京公网安备11010802017621号</div>';$(".footer").html(a)}function formatRelationName(a){if(!a||a==""){return""}if(a=="1"){return"父亲"}if(a=="2"){return"母亲"}if(a=="3"){return"本人"}if(a=="5"){return"班主任"}return"其他"}function formatRelation(a){if(!a||a==""){return""}if(a=="1"){return'<span class="label label-info">父亲</span>'}if(a=="2"){return'<span class="label label-primary">母亲</span>'}if(a=="3"){return'<span class="label label-success">本人</span>'}if(a=="5"){return'<span class="label label-warning">班主任</span>'}return'<span class="label label-default">其他</span>'}function checkIdCode(d){if(d.length!=18){return false}var a=0;for(var b=0;b<d.length;++b){var c=d.charCodeAt(b)-"0".charCodeAt(0);if(c==120-48||c==88-48){c=10}if(c>10){return false}a=(a*2+c)%11}return a==1}function formatIdCode(e){if(e==null){return""}var d=e.substr(0,6),b=e.substr(6,8),c=e.substr(14);var a=d+"<b>"+b+"</b>"+c;if(d=="######"&&c=="####"||checkIdCode(e)){if(b<"19860000"){return'<span class="idcode-good">'+d+'<b style="color:red;">'+b+"</b>"+c}+"</span>";return'<span class="idcode-good">'+a+"</span>"}return'<span class="idcode-bad">'+a+"</span>"}function formatSex(a){if(""+a=="1"){return"男"}if(""+a=="2"){return"女"}return""}function createProgressBar(d,c){if(!d){d=0}if(!c){c=0}var b=9999;if(1*c>0){b=d/c*100}else{if(1*d==0){b=100}else{b=9999}}var a=b;if(a<0){a=0}if(a>100){a=100}b=Math.floor(b*100+0.5)/100;return'<div class="progress" style="width:64px; margin-bottom:0px;"><div class="progress-bar '+((b<0||b>100)?"progress-bar-danger":"progress-bar-info")+'" role="progressbar" aria-valuenow="'+a+'" aria-valuemin="0" aria-valuemax="100" style="width: '+a+'%;">'+b+"%</div></div>"}function getResultDesc(b){var a=["等待评测","正在运行","正确","错误","运行超时","内存超限","编译出错","表达错误","输出过多","运行错误","编译通过","评测异常","SPJ异常"];if(b>=0&&b<a.length){return a[b]}return""}function formatTeacherScore(b){if(!(b>=0&&b<=10)){return""}var a=["未评分",'<i class="fa fa-wheelchair bicon"></i>不合格','<i class="fa fa-male bicon"></i>合格','<i class="fa fa-bicycle bicon"></i>普及二等','<i class="fa fa-motorcycle bicon"></i>普及一等','<i class="fa fa-car bicon"></i>提高二等','<i class="fa fa-ship bicon"></i>提高一等','<i class="fa fa-plane bicon"></i>铜牌','<i class="fa fa-fighter-jet bicon"></i>银牌','<i class="fa fa-rocket bicon"></i>金牌','<i class="fa fa-flash bicon"></i>大师'];return a[b]}function getTrainLevel(b){var a=["初学","入门",'<i class="fa fa-male bicon"></i>普及三等','<i class="fa fa-bicycle bicon"></i>普及二等','<i class="fa fa-motorcycle bicon"></i>普及一等','<i class="fa fa-car bicon"></i>提高二等','<i class="fa fa-ship bicon"></i>提高一等','<i class="fa fa-plane bicon"></i>铜牌','<i class="fa fa-fighter-jet bicon"></i>银牌','<i class="fa fa-rocket bicon"></i>金牌','<i class="fa fa-flash bicon"></i>大师'];if(b>=1200){return a[10]}if(b>=900){return a[9]}if(b>=700){return a[8]}if(b>=500){return a[7]}if(b>=300){return a[6]}if(b>=200){return a[5]}if(b>=100){return a[4]}if(b>=50){return a[3]}if(b>=20){return a[2]}if(b>=5){return a[1]}return a[0]}function showTrainScoreAndLevel(b,a){if(!(b>=0)){return"暂无"}return b+' &nbsp; <a href="/study/student.page?stuid='+a+'">'+getTrainLevel(b)+"</a>"}function showLifeScore(a){if(!(a>=0)){return"暂无"}return a+""}function lunchAddStudentModal(d,b){var c=$("#addStudentModal");function a(e){$.post("/classes.ClassFunc.dt",$.extend({cmd:"tryadd",names:e},d),function(h){if(h.ret=="OK"){var g="";g+="<tr><th>编号</th><th>姓名</th><th>当前班级</th><th>竞赛班级</th><th>状态</th><th>操作</th></tr>";for(var f=0;;++f){var j=h[f];if(!j){break}g+='<tr tarid="'+j.id+'"';if(j.guess=="S"){g+=' class="success"'}else{if(j.guess=="N"){}else{if(j.guess=="A"){g+=' class="warning"'}else{if(j.guess=="F"){g+=' class="danger"'}}}}g+="><td>"+j.id+"</td><td>"+j.name+"</td><td>"+j.currentclass+"</td><td>"+j.oicls;g+="</td><td>";if(j.status=="NOTFOUND"){g+='<span class="label label-danger">未找到</span>&nbsp;'}else{if(j.status=="ADDED"){g+='<span class="label label-success">已添加</span>&nbsp;'}else{if(j.status=="GRADUATED"){g+='<span class="label label-warning">已毕业</span>&nbsp;'}else{if(j.status=="AMBIGUOUS"){g+='<span class="label label-info">重名待确定</span>&nbsp;'}else{if(j.status=="OK"){g+='<span class="label label-primary">准备添加</span>&nbsp;'}}}}}g+="</td><td>";if(j.guess!="F"){g+='<div class="btn btn-default btn-sm btn-selswitch"><i class="fa fa-circle"></i></div>'}g+="</td></tr>"}c.find(".stu-tab").html(g);c.find(".stu-tab .btn-selswitch").click(function(){var i=$(this).parent().parent();if(i.hasClass("success")){i.removeClass("success")}else{i.removeClass("warning").addClass("success")}});$(".stu-add-step2").show()}else{alert(getErrorDesc(h.err))}},"json")}c.find(".goto-step2").unbind("click").click(function(){a($(".stu-list").val())});c.modal({backdrop:"static",keyboard:false});c.find(".do-submit").unbind("click").click(function(){var e="";c.find(".stu-tab tr.success").each(function(){if(e!=""){e+=","}e+=$(this).attr("tarid")});b(e);c.modal("hide")})}function upDownButtons(){return'<div class="updown"><a class="up" href="###"></a><a class="down" href="###"></a></div>'};